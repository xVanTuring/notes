# 网络互联技术
## 网络互联概述
* 网络互联技术是所有能在物理上和逻辑上实现不同网络相互连接饿技术的总称，对应于ISO/OSI模型的各个层次
* 异构网络：采用不同通信技术和运行协议的网络
    * 局域网中的以太网、令牌环网，广域网中的帧中继网和ATM网
    * 实现x的基本策略主要包括协议转换和构建虚拟互联网络
## 网际协议 IP
* IP 的功能位于OSI参考模型的网络层，与地址解析协议ARP，网际控制报文协议ICMP和网际组管理协议IGMP共同组成TCP/IP的网络互联层
* IP 采用路由器作为中间设备，在网络层实现数据的路由和转发
* IP 的特点：
    * IP 是面向无连接的、不可靠的分组传输协议
    * IP 屏蔽了数据链路层和物理层的差异，使得数据的转发和传输更加方便
    * IP 是点对点式网络通信协议
## IP 地址
### 早期分类
* 网络号和主机号： IP地址::=网络号，主机号
* A类地址：8位网络号，24位主机号，网络号高位固定为1，默认子网掩码:255.0.0.0
* B类地址：16位网络号，16位主机号，网络号高两位固定为10，默认子网掩码:255.255.0.0
* C类地址：24位网络号，8位主机号，网络号高三位固定为100，默认子网掩码:255.255.255.0
* D类地址：最高四位为1110，用于IP多播
* E类地址：最高四位为1111，保留使用
### 子网划分
* 划分为 网络号、子网号、主机号
* 子网内部路由能够将IP数据报发给不同的子网依靠的是子网掩码, 通过将子网掩码与IP地址做AND运算，结果为所在子网的网络地址
### 无分类编址 CIDR
* IP地址=网络前缀，主机号
* 在IP后面添加 斜线/和网络前缀位数来标注一个完整的IP地址

## IP 路由概述
* IP 路由：在整个网络中为IP数据报寻找合适的通信路径并且将其转发出去的过程，由路由器实现
* 路由器：是一种具有多个输入端口和多个输出端口的专用计算机，主要任务是获取与维护路由信息及转发分组
* 路由器的两个基本功能：路由和转发
* 路由表基本结构：目的网络-子网掩码-下一跳-接口
    * 下一跳：表示到达该目的网络的路径的下一个邻居节点的接口IP地址，可能是下一跳路由器和本级相连接的IP地址，也可能是直连网络（为空）。
    * 接口：转发IP分组到达该目的网络时，应该从那个接口发出去
* 最长匹配原则：多个网络项匹配成功则选择网络前缀匹配成功位数最长的路由项
* 路由信息配置分为： 静态路由（优先级最高，手动配置）和动态路由
* 距离-向量路由算法是一种仅需要网络局部信息、异步的、迭代的、分散式的路由算法
### 路由协议
* 自治系统 AS：是在统一技术管理下的一组路由器，这些路由器使用相同的AS内部路由选择协议和度量以确定分组在该AS内的路由，一个AS可能使用多种内部路由协议和度量，但是一个AS对其他AS表现出的是一个单一和一致的路由选择策略
* 内部网关协议：在一个自治系统内部使用的路由选择协议，即域内路由协议：RIP和OSPF（P117）
* Internet使用的外部网关协议是 BGP4