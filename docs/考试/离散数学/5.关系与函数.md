# 关系与函数
## 关系和定义
设A，B为集合，$A \times B$的任何自己叫做从A到B的二元关系，
当A=B时叫做A上的二元关系。简称关系，记作R。
若 $<x,y>\in R$，可记作$xRy$；若$<x,y> \notin R$,则记作$x\not R y$;
### 定义域、值域、域
> <x,y>
>
> 
* dom 定义域：所有的x
* ran 值域：所有的y
* fld 域：定义域并值域
### 几个特殊关系
设A 为任意集合 

空关系: $\empty$ 是A上的关系 

全域关系: $E_A = \{<x,y>| x\in A \land y\in A\} = A \times A$ 

恒等关系: $I_A = \{<x,x>|x \in A\}$

实例 $A = \{1,2\}$ 则有：

* $E_A = \{<1,1>,<1,2>,<2,1>,<2,2>\}$
* $E_I = \{<1,1>,<2,2>\}$
### 关系的表示：关系矩阵

设给定两个有限集合 X,Y, R为X到Y的关系，则关系矩阵$M_R = (r_{ij})_{m\times n}$, 其中

* $r_{ij} =1$ 当 $<x,y> \in R$
* $r_{ij} =0$ 当 $<x,y> \notin R$
### 关系的表示：关系图

## 关系的性质
设R是集合A上的关系
### 自反性
如果对$\forall a \in A$，必有 $aRa$, 则关系R在A上是自反的；即集合里面所有元素都和自己有关系

例子：
A上的全域关系 $E_A$, 恒等关系$I_A$,小于等于关系 $LE_A$, 整除关系$D_A$
### 反自反性
如果对$\forall a \in A$，必有 $a \not R a$, 则关系R在A上是反自反的；即集合里面所有元素都和自己没有关系

实例：实数集上的小于关系，幂集上的真包含关系
### 对称性
对$\forall a,b \in A$，若 $a R b$ 必有 $b R a$, 则关系R在A上是对称性；
> 即将关系中的任意一对数颠倒还在集合内的话，那这个集合则是对称关系

例子：
A上的全域关系$E_A$，恒等关系$I_A$和空关系
### 反对称性
对$\forall a,b \in A$，若 $a R b$ 且 $bRa$，必有$a=b$, 则关系R在A上是反对称性；

> 即集合中是否有 XRY YRX，如果有则判断x = y是否为真，如果为真则，这个集合为反对称关系，如果不为真，则不是反对称关系；如果集合中没有XRY YRX,则该集合为反对称关系，无法再判断X=Y。（类似但条件关系）；

$(若xRy,yRx) \rightarrow (x=y)$

例子：
A上的恒等关系$I_A$, 空关系(不存在任何关系)
### 传递性
对$\forall a,b,c \in A$，若$a R b$且$bRc$，必有 $aRc$, 则关系R在A上是传递的
> 也是类似但条件判断的方式，只有出现$aRb,bRc$但是没有$aRc$时才不是传递的

$(若aRb,bRc) \rightarrow (aRc)$

例子：
* 全域关系$E_A$,恒等关系$I_A$,空关系
* 小于等于关系、小于关系、整除关系、包含关系、真包含关系
### 例题
$A= \{1,2,3\}$，有
* $R_1 = \{<1,1>,<2,2>\}$; 不是自反；不是反自反
* $R_2 = \{<1,1>,<2,2>,<3,3>,<1,2>\}$; 是自反的；不是反自反的
* $R_3 = \{<1,3>\}$; 不是自反；是反自反的
### 例题2
$A= \{1,2,3\}$，有
$A= \{1,2,3\}$，有
* $R_1 = \{<1,1>,<2,2>\}$; 对称;反对称
* $R_2 = \{<1,1>,<1,2>,<2,1>\}$;对称；不是反对称的(存在<1,2>,<2,1> 且 2不等1)
* $R_3 = \{<1,2>,<1,3>\}$; 不是对称的；反对称的
* $R_4 = \{<1,2>,<2,1>,<1,3>\}$; 不是对称的；不是反对称的
### 表格
![alt text](img/858ccffa721d0f9b617740f7e667c87b22d96802.jpg)

## 关系矩阵的布尔运算
### A和B的并 
$A\lor B = C = [c_{ij}]$

$$
c_{ij}=
\begin{cases}
1 & a_{ij}=1 或 b_{ij} = 1 \\
0 & a_{ij}=0 且 b_{ij} = 0
\end{cases}
$$
### A和B的交
$A\land B = C = [c_{ij}]$

$$
c_{ij}=
\begin{cases}
1 & a_{ij}=1 且 b_{ij} = 1 \\
0 & a_{ij}=0 或 b_{ij} = 0
\end{cases}
$$
### 布尔积
$A \odot B=C = [c_{ij}]$
$$
c_{ij}=
\begin{cases}
1 &\exist k, 1\le k \le n,\text{使得}a_{ik}=1\text{且}b_{kj}=1 \\
0 & \text(否则)
\end{cases}
$$
> $c_{00}$ 等于A第一行和B第一列，每个对应元素做合取再析取，所以只有要一组为1则这个位置为1，也可以理解成普通矩阵乘法，最后将大于1的数改为1
### 逆
$R^{-1} = \{ <y,x>| <x,y> \in R\}$  

### 布尔矩阵运算性质
$$
M_{R\cap S} = M_R \land M_S  \\
M_{R\cup S} = M_R \lor M_S  \\
{M_R}^{-1} = (M_R)^T
$$
### 复合运算
设R是A到B的关系，S是B到C的关系则定义

$$R \circ S = {<x,z>| \exist y(<x,y>\in R \land <y,z> \in S)}$$
称 $R \circ S$ 是 R和S的符合关系；是右符合

#### 性质
* $(F \circ G)\circ H = F \circ (G \circ H)$ 结合律
* $(F \circ G) ^{-1} = G^{-1} \circ F^{-1}$
* $M_{R \circ S} = M_R \odot M_S$
* $R^0 = I_A$
* $R^{n+1} = R^n \circ R$
### 闭包
$R'$是R的自反闭包要满足:
* $R'$ 是自反的
* $R\in R'$
* $R'$是所有A上的自反关系中最小的
#### 记法和求法
* 自反闭包 $r(R) = R\cup I_A$
* 对称闭包 $s(R) = R \cup R^{-1}$
* 传递闭包 $t(R) = R \cup R^2 \cup R^n$ 其中n为集合A中的树木

